# Spirit Hunter

The repository contains the game made for the js13kGames competition in 2024.

Competition rules:
> js13kGames is a JavaScript coding competition for Web Game Developers running yearly since 2012. The fun part of the compo is the file size limit set to 13 kilobytes. The competition started at 13:00 CEST, 13th August and will end at 13:00 CEST, 13th September 2024. Theme this year is [Triskaidekaphobia](https://medium.com/js13kgames/js13kgames-2024-start-and-theme-announcement-5d734f77da68).

Try demo here: [https://dev.js13kgames.com/2024/games/spirit-hunter](https://dev.js13kgames.com/2024/games/spirit-hunter).

Updated version: [https://mightyaleksey.github.io/js13k-2024-spirit-hunter/](https://mightyaleksey.github.io/js13k-2024-spirit-hunter/).


## Design

With a fear of not meeting 13kb bundle size and passing multiple sacrifices and loses, I'm happy to preset "Spirit Hunter"! It is an idle shooter (hello Vampire Survivors) having hunter as main character who brings peace to the cemetery in suburbs.

For this year, I made desktop and mobile friendly game. Use "w,a,s,d" keys and Enter on desktop to control character and I made a custom joystick for mobile.

For the technical part, I was inspired by [Love2d engine](https://love2d.org) and implemented lightweight [engine](./src/engine.js), thats supports [game loop](https://gameprogrammingpatterns.com/game-loop.html#play-catch-up) pattern and almost similar to Love2d rendering primitives.

The data flow heavily relies on the [state machine](https://gameprogrammingpatterns.com/state.html) and state stack patterns. State machine were used to implement:
- Character states, like idle, movement, stunned and etc;
- Weapon shooting and states helped to control its behaviour: aiming, shooting and waiting for the reload.

State stack was used for the navigation between starting and game screens with a custom transition. Also it helped to build interactive menus. Due to delegating control (updates) to the top state, you just need to push another state to the stack, that implements dialog or menu and the game will be paused in meantime.

Animations are basically series of sprites, which are unified and groupped by particular states. All of those are defined in [definitions.js](./src/definitions.js) (kind of data-oriented design) and empowered by [Character.js](./src/entities/Character.js).


## Plan
- [x] Phase 1: MVP
  - [x] Add Entity class
  - [x] Add Enemy, Player
  - [x] Add GameObject
  - [x] Add camera movement
  - [x] Add shooting
  - [x] Basic AI
  - [x] Add enemy generation
- [ ] Phase 2
  - [x] Projectile implementation + collisions
  - [x] Show damage numbers
  - [x] Add environment
  - [x] Infinite map
  - [x] Mobile controls
  - [x] Sound
  - [x] Music
  - [x] Enemy generation
  - [x] Health drop
  - [x] Level progression
  - [ ] Cards
  - [x] Menus
  - [x] Dynamic scaling
  - [ ] Sprite generation


## How To

Prototypes:
- `Entity` — Universal building block for other game elements. Implements dimentions, statuses and rendering.
- `Character` — Base class for the interactive characters (enemies, player). Inheritor of Entity.
- `Thing` — Base class for the environment objects (obstacle, projective).

Update sequence:
1. Entity changes (I/O logic, movement).
2. Clean up destroyed entities.
3. Collision detection.

Open local server on mobile device:
- Get IP: `ipconfig getifaddr en1`.
- Run vitejs with `--host <ip>`.
- Open final address on device.


## Resources

- Music was copied and rendered by https://keithclark.github.io/ZzFXM/.
- Sound was generated by https://killedbyapixel.github.io/ZzFX/.
- Original characters sprite sheet is adapted by [@javikolog](https://itch.io/profile/route1rodent) (source: [https://route1rodent.itch.io/16x16-rpg-character-sprite-sheet](https://route1rodent.itch.io/16x16-rpg-character-sprite-sheet)), distributed under [CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/) and unnecessary tiles were dropped by me to fit the limit.
- Original map sprite sheet is made by [@AtwoodPer](https://x.com/AtwoodPer) (source: [https://poppants.itch.io/16x16-px-tilemap](https://poppants.itch.io/16x16-px-tilemap)). I just change background color to be transparent.


## Thanks

- Andrzej Mazur for organizing and running [js13kGames](https://js13kgames.com) competition.
